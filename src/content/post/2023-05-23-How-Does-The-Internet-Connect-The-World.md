---
layout: post
title: '인터넷은 어떻게 전 세계를 연결할까?'
author: [5기_로이]
tags: ['network']
date: '2023-05-23T12:00:00.000Z'
draft: false
image: ../teaser/cycle.png
---


## 들어가며

'어떻게 마우스 클릭 한 번으로 전 세계에 소식을 전할 수 있을까?'<br>
세계가 인터넷이라는 그물망으로 엮여 정보가 오가는 현실에 궁금증을 품은 적이 있습니다.
우아한테크코스에서 웹 프로그래밍을 공부하면서 그 해답을 조금씩 알아가고 있습니다.
기술을 설명할 때 전문 용어 사용과 개념 정의는 매우 중요합니다. 하지만 때로는 쉽고 직관적인 언어로 기술의 전체 맥락을 이해하는 것 역시 학습에 효과적이었습니다.   
이번 시간에는 인터넷을 통해 정보가 세계로 전달되는 과정을 '넓고' '쉽게' 알아보려고 합니다. 



## 인터넷은 무엇으로 전 세계를 연결할까?

처음에는 위성 통신망을 통해 인터넷이 연결될 것으로 생각했습니다.
태평양을 가로질러 아시아와 아메리카 대륙 사이를 케이블로 연결하기란 불가능해 보였기 때문입니다.
하지만 현실의 네트워크 기술은 제 상상을 훨씬 뛰어넘었습니다.

<br>

![2023-05-23-How-Does-The-Internet-Connect-The-World-img1.png](..%2Fimages%2F2023-05-23-How-Does-The-Internet-Connect-The-World-img1.png)

전 세계에 설치된 해저 광케이블 지도입니다. 
태평양 한가운데 무수히 많은 광케이블이 설치된 모습을 볼 수 있습니다. 
실제로 인터넷 해외 연결망 트래픽의 약 90% 이상은 해저 광케이블을 거쳐 발생한다고 합니다. <br>
하지만 심해에 광케이블 설치가 가능한지 의문스러웠습니다. 
해저 200m까지는 선박과 연결된 장비를 이용하여 직접 케이블을 매설할 수 있다고 합니다. 설치 방식도 비교적 친숙합니다. 
소가 쟁기를 끌어 밭을 갈듯이 장비로 해저면을 파고 케이블을 매설합니다. 
해저 1,000m가 넘는 곳에서는 직접 매설하지 않고 케이블을 가라앉힌다고 합니다.


![2023-05-23-How-Does-The-Internet-Connect-The-World-img2.jpeg](..%2Fimages%2F2023-05-23-How-Does-The-Internet-Connect-The-World-img2.jpeg)

<br>
만약 미국에 있는 제 친구가 우테코(우아한테크코스) 캠퍼스에 있는 저에게 이메일을 보낸다면, 해당 데이터는 광케이블을 타고 태평양을 건너 한국까지 도달할 것입니다. 
그렇다면 이메일 데이터는 우테코 캠퍼스의 위치를 어떻게 알고 찾아올까요?



## 데이터는 내 컴퓨터의 위치를 어떻게 알까?
종이 우편이 집 주소로 전달되듯, 데이터는 컴퓨터의 IP주소를 찾아갑니다. 
IP 주소는 데이터 전송의 출발지나 목적지를 나타내는 고유 번호입니다. 
인터넷을 이용하는 과정은 데이터를 요청하는 쪽(클라이언트)과 응답하는 쪽(서버)의 IP 주소 간 상호작용입니다. 
구글에서 검색할 때, 구글 컴퓨터 IP주소에서 내 컴퓨터 IP 주소로 데이터가 실시간으로 오가는 것이죠. 
(다만, 구글의 서버는 개인용 컴퓨터가 아니라 수많은 컴퓨터가 모인 데이터 센터라고 할 수 있습니다.) 
그렇다면 구글에 접속하기 위해서 구글의 IP 주소를 외우고 있어야 할까요?

![2023-05-23-How-Does-The-Internet-Connect-The-World-img3.png](..%2Fimages%2F2023-05-23-How-Does-The-Internet-Connect-The-World-img3.png)

<br>

## 모든 IP주소를 외우고 있어야 할까?
긴 숫자로 이뤄진 IP 주소를 외우기란 힘든 일입니다. 
다행히 브라우저 주소창에 ‘google.com’을 입력하면 구글 웹페이지에 접속할 수 있습니다. 
즉, 상대 컴퓨터 이름(도메인명, Domain Name)만 알면 IP 주소를 입력하지 않아도 통신할 수 있습니다.

<br>

![2023-05-23-How-Does-The-Internet-Connect-The-World-img4.png](..%2Fimages%2F2023-05-23-How-Does-The-Internet-Connect-The-World-img4.png)

스마트폰 주소록에는 이름과 전화번호가 매칭되어 저장됩니다. 
마찬가지로 도메인 이름에 해당 IP주소를 대응하여 저장하는 서버가 존재하는데, 이를 DNS(Domain Name System)라고 합니다. 
DNS 덕분에 도메인명 입력만으로 IP 주소를 찾을 수 있죠.
혹시 IP주소가 변경되더라도 문제없습니다. 
DNS를 관리하는 서버에서 도메인 이름에 매칭되는 IP주소를 자체적으로 바꿔주기 때문입니다.

도메인 이름으로 찾은 IP 주소로 데이터를 주고받는 것까지는 확인했습니다. 
그렇다면 구체적으로 어떤 데이터를 어떻게 전달할까요?



## 어떤 데이터를 어떤 방식으로 전달할까?
택배로 물건을 보낸다고 가정하겠습니다. 
택배 회사에 포장되지 않은 물건만 전달한다면 아마 배송이 불가능할 것입니다. 
물건을 박스로 포장하고, 운송장도 붙여야겠죠. <br> 
데이터 통신 방식도 이와 유사합니다. 
운송장에 ‘보내는 주소’와 ‘받는 주소’를 적어 택배 상자에 붙이는 것처럼, ‘실제 데이터’에 송수신처 ‘IP주소’를 덧붙이는 방식으로 포장합니다. 
데이터 포장 방식은 표준화 되어 있는데 이를 인터넷 프로토콜(Internet Protocol, IP)이라고 합니다. 
(사실 인터넷 프로토콜에는 IP주소 이외에 다양한 정보를 포함합니다.)

![2023-05-23-How-Does-The-Internet-Connect-The-World-img5.png](..%2Fimages%2F2023-05-23-How-Does-The-Internet-Connect-The-World-img5.png)

<br>
특이한 점은 데이터를 여럿으로 쪼개어 분할 전송한다는 사실입니다. 
쇼핑몰에서 물건을 주문했는데 묶음 배송이 아닌 따로 배송이면 짜증만 나겠죠. 
하지만 데이터 통신에서 분할 전송에는 큰 장점이 있습니다. 

<br>

두 컴퓨터가 데이터를 ‘통째로’ 전송하는 경우를 생각해 보겠습니다. 
두 컴퓨터는 서로를 연결하는 회선을 비교적 오랜 시간 독점하게 됩니다. 
다수의 컴퓨터가 동시에 통신하려면, 그만큼 회선을 더 설치해야 합니다. <br> 
반면 데이터를 분할하여 전송하면 한 컴퓨터가 회선을 독점하는 시간이 상대적으로 짧아집니다. 
따라서 하나의 회선으로 여러 컴퓨터가 동시에 통신할 수 있습니다. 
공유 자전거의 이용 시간을 나눠서 한 대로 여러 명이 탈 수 있는 것과 비슷한 원리입니다.

<br>
데이터를 쪼개서 전송한 후, 받은 다음 다시 합친다니? 
배송 사고가 우려됩니다. 
데이터 조각 중 하나가 사라지면 어떡할까요? 
데이터가 보낸 순서대로 도착하지 않을 수도 있지 않을까요?


## 데이터 배송 사고에 대비하는 방법은?
택배의 출발지와 도착지를 아는 것만으로 배송사고를 막기 어려워 보입니다. 
데이터 통신에서도 배송사고를 막기 위해 데이터를 보내기 전, 받은 후에 추가 작업을 진행합니다. 
이에 관한 규약을 ‘전송 제어 프로토콜’(TCP, Transmission Control Protocol)이라고 합니다.

![2023-05-23-How-Does-The-Internet-Connect-The-World-img6.png](..%2Fimages%2F2023-05-23-How-Does-The-Internet-Connect-The-World-img6.png)

<br>

전송 중이던 데이터 조각 하나가 분실된 경우를 생각해 보겠습니다. 
인터넷 프로토콜(IP)만으로는 데이터 분실 여부를 확인할 수 없습니다. 
데이터를 받는 컴퓨터가 보낸 컴퓨터에게 ‘데이터를 잘 받았음’이라는 메시지를 알려준다면 어떨까요? 
보낸 컴퓨터 입장에서 ‘확인 응답’ 메시지를 받지 못한다면, 배송 사고가 일어났다고 판단하고 데이터를 다시 보낼 수 있습니다.

![2023-05-23-How-Does-The-Internet-Connect-The-World-img7.png](..%2Fimages%2F2023-05-23-How-Does-The-Internet-Connect-The-World-img7.png)

<br>

앞서 분할 전송된 데이터가 순서대로 도착하지 않는 문제에 관해 이야기했습니다. 
데이터를 받는 사람은 데이터를 잘 받았다는 ‘확인 응답’ 메시지를 보낼 때, 다음 순서로 받을 데이터 조각 번호도 같이 보냅니다. 
이로써 순서에 맞게 데이터를 받을 수 있고, 그렇지 않을 경우 재요청할 수 있습니다.

![2023-05-23-How-Does-The-Internet-Connect-The-World-img8.png](..%2Fimages%2F2023-05-23-How-Does-The-Internet-Connect-The-World-img8.png)

<br>

얼마 전, 제가 집을 오래 비운 사이에 이모가 사과 상자를 택배로 보내서 사과가 썩은 적이 있습니다. 
택배를 보내기 전, 문자메시지를 통해 ‘사람이 집에 있는지’를 확인했다면 그럴 일이 없었겠죠. 
데이터를 전송할 때 수신처의 컴퓨터가 꺼져 있다면 데이터를 받을 수 없을 것입니다. 
그래서 본격적으로 데이터를 전송하기 전, 송신처와 수신처가 데이터 전송 가능 여부를 미리 소통하는 작업을 거칩니다. 
(이러한 작업을 ‘TCP 3 way handshake’라고 합니다.) 이처럼 배송사고를 예방하기 위한 추가 정보를 덧붙이는 방식으로 실제 데이터를 포장하게 됩니다.

![2023-05-23-How-Does-The-Internet-Connect-The-World-img9.png](..%2Fimages%2F2023-05-23-How-Does-The-Internet-Connect-The-World-img9.png)

<br>

마지막으로 간단한 예시를 통해 앞서 살펴본 내용을 정리해 보겠습니다.
우테코 캠퍼스에 있는 제가 유튜브 영상을 클릭합니다. 
영상을 요청받은 구글 데이터센터는 저장장치에서 해당 영상을 찾습니다. 
데이터 전송 전, 배송사고를 막기 위한 사전 작업을 수행하겠죠. 
또 출발지와 도착지 IP 주소를 명시하여 데이터를 포장할 것입니다. 
위 작업은 영상 전체가 아니라, 여러 개로 쪼개진 영상 데이터 단위(패킷)로 진행됩니다. 
데이터 조각들은 전기 신호(또는 광신호)로 변환되어 케이블을 타고 이동합니다. 
데이터 조각들은 우테코 캠퍼스로 도착한 후, 하나의 영상으로 조립되어 재생됩니다.

<br>

유튜브 영상은 클릭함과 거의 동시에 재생됩니다. 
그 짧은 순간 동안 위와 같은 엄청난 일이 일어나는 것이정죠. 
우리는 매일 같이 인터넷을 사용합니다. 
너무 익숙해서 의문을 품지 못했던, 인터넷 작동 원리의 놀라움을 한 번쯤 느껴보셨으면 좋겠습니다.


## 참고
- https://www.youtube.com/watch?v=o5yBl59wRbY
- https://m.blog.naver.com/koreamof/221538025545
- http://www.irobotnews.com/news/articlePrint.html?idxno=3160
- https://www.submarinecablemap.com/
- https://velog.io/@emplam27/CS-%EA%B7%B8%EB%A6%BC%EC%9C%BC%EB%A1%9C-%EC%95%8C%EC%95%84%EB%B3%B4%EB%8A%94-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EA%B3%84%EC%B8%B5%ED%99%94%EC%99%80-OSI-TCPIP-UDP%EC%9D%98-%ED%8A%B9%EC%A7%95%EA%B3%BC-%EC%B0%A8%EC%9D%B4%EC%A0%90
- https://loopstudy.tistory.com/320
- '하루 3분 네트워크 교실'/아미노 에이지 / 영진닷컴
